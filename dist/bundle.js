!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{LOG_LEVELS:()=>o,createLogger:()=>u});const r=e=>"function"==typeof e,a=(e,t)=>{const r=Object.entries(e).map((([e,r])=>t(e,r)));return Object.fromEntries(r)},n=e=>r(e)?e:()=>e,o={critical:0,error:1,warn:2,info:3,debug:4},i={enabled:!0,level:"info",formatLogSegments:e=>e.join(" "),prefix:{includeLevelName:!0,includeTime:!0,getCurrentTimeString:()=>(new Date).toLocaleTimeString("en-US",{hour12:!1}),format:e=>`[${e.join(" ")}]`,colors:{critical:"red",error:"orange",warn:"yellow",info:"skyblue",debug:"lightgreen"}},sink:{endpoint:null,func:({message:{asSegments:e,asString:t},metadata:r})=>{console.log(...e)}},metadata:()=>({clientTimestamp:Date.now()}),replaceParentConfig:!1,replaceParentMetadata:!1,filter:({message:{asSegments:e,asString:t},metadata:r})=>!0},s=e=>!Array.isArray(e)&&"object"==typeof e&&null!==e,l=e=>{return t=Object.keys(e),r=t=>s(e[t])?{[t]:!0,...l(e[t])}:{[t]:!0},t.reduce(((e,t)=>({...e,...r(t)})),{});var t,r},c=l(i),f=e=>s(e)&&Object.keys(e).every((e=>c.hasOwnProperty(e))),m=(e,t)=>{if(t.replaceParentConfig)return t;if(t.replaceParentMetadata&&e.metadata)return m({...e,metadata:null},t);const r=[e.metadata,t.metadata];if(r.every((e=>e))){const a=r.map(n);return m({...e,metadata:null},{...t,metadata:a})}return a(e,((r,a)=>f(e[r])&&f(t[r])?[r,m(e[r],t[r])]:[r,t.hasOwnProperty(r)?t[r]:a]))},d=(e,t,r)=>{if(!t.prefix)return[];const a=[t.prefix.includeLevelName&&e,t.prefix.includeTime&&t.prefix.getCurrentTimeString()].filter((e=>e)),n=(r?"%c":"")+t.prefix.format(a),o=r?`color: ${t.prefix.colors[e]};`:"";return o?[n,o]:[n]},g=(e,t,r,a)=>[...d(t,r,a),...e].filter((e=>e)),u=(e=i)=>{const t=m(i,e);return{...a(o,((e,a)=>{return[e,(n=e,i=a,(...e)=>{const a=f(e[0]),s=a?m(t,e[0]):t,l=a?e.slice(1):e;if(!s.enabled||i>("number"==typeof(c=s.level)?c:o[c]))return;var c;const d={...Array.isArray(s.metadata)?s.metadata.reduce(((e,t)=>Object.assign(e,t())),{}):(u=s.metadata,r(u)?u():u),level:n};var u;const p=g(l,n,s,!!s.prefix.colors),y=s.formatLogSegments(p);if(s.filter({message:{asString:y,asSegments:p},metadata:d})&&(s.sink.func&&s.sink.func({message:{asString:y,asSegments:p},metadata:d}),s.sink.endpoint)){const e=g(l,n,s,!1);(async(e="",t={})=>{(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,body:JSON.stringify(t)})).json()})(s.sink.endpoint,{message:{asString:s.formatLogSegments(e),asSegments:e},metadata:d})}})];var n,i})),createSubLogger:e=>u(m(t,e))}};return t})()));